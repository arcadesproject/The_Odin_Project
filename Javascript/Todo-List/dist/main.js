(()=>{"use strict";let e,t=[];function n(){t=JSON.parse(localStorage.getItem("projects"))}function o(){localStorage.setItem("projects",JSON.stringify(t)),localStorage.setItem("currentProject",JSON.stringify(e)),n()}const d=function(e){return`${e}_`+Math.random().toString(36).substr(2,9)},c=(e,n)=>{const o=((e,t)=>({name:e,description:t,list:[],id:d("project")}))(e,n);return t.unshift(o),o};c("test","testing"),c("test2","testing");const i=(e,t,n,o)=>({name:e,description:t,dueDate:n,priority:o,id:d("note")});function r(e,t){t.list.unshift(e)}function a(t){t.preventDefault();const{target:n}=t,d=n[0].value,c=n[1].value,a=n[2].value,l=n[3].value,s=i(d,c,a,l);r(s,e);const u=E(s);document.getElementById("notes-container").prepend(u),m(),o()}function l(){document.getElementById("note-form").style.display="flex"}function m(){const e=document.getElementById("note-form");e.style.display="none",function(e){e.reset()}(e)}function s({target:e}){const t=e.parentNode.id;document.getElementById("main").appendChild(function(e){const t=document.createElement("form");t.classList.add("note-form-edit"),t.id=`${e}`;const n=document.createElement("ul"),o=document.createElement("li"),d=document.createElement("input");d.classList.add("note-form-edit-title"),d.required=!0,o.appendChild(d);const c=document.createElement("li"),i=document.createElement("input");i.classList.add("note-form-edit-description"),i.required=!0,c.appendChild(i);const r=document.createElement("li"),a=document.createElement("input");a.classList.add("note-form-edit-date"),a.required=!0,r.appendChild(a);const l=document.createElement("li"),m=document.createElement("input");m.classList.add("note-form-edit-priority"),m.required=!0,l.appendChild(m);const s=document.createElement("li"),E=document.createElement("button"),f=document.createElement("button");return E.type="submit",E.textContent="Save",f.addEventListener("click",u),f.textContent="Cancel",s.append(E,f),t.addEventListener("submit",p),n.append(o,c,r,l,s),t.appendChild(n),t}(t));const n=e.parentNode.querySelector(".note-title"),o=e.parentNode.querySelector(".note-description"),d=e.parentNode.querySelector(".note-date"),c=e.parentNode.querySelector(".note-priority"),i=document.querySelector(".note-form-edit-title"),r=document.querySelector(".note-form-edit-description"),a=document.querySelector(".note-form-edit-date"),l=document.querySelector(".note-form-edit-priority");i.value=`${n.textContent}`,r.value=`${o.textContent}`,a.value=`${d.textContent}`,l.value=`${c.textContent}`}function u(){const e=document.querySelector(".note-form-edit");document.getElementById("main").removeChild(e)}function p(n){n.preventDefault();const{target:d}=n,c=d[0].value,i=d[1].value,r=d[2].value,a=d[3].value,l=document.getElementById(`${d.id}`),m=l.querySelector(".note-title"),s=l.querySelector(".note-description"),p=l.querySelector(".note-date"),E=l.querySelector(".note-priority");m.textContent=`${c}`,s.textContent=`${i}`,p.textContent=`${r}`,E.textContent=`${a}`,function(n,d,c,i,r){const a=t.findIndex((t=>t.name===e.name)),l=t[a].list.findIndex((e=>e.id===r));t[a].list[l].title=n.innerText,t[a].list[l].description=d.innerText,t[a].list[l].dueDate=c.innerText,t[a].list[l].priority=i.innerText,e=t[a],o()}(m,s,p,E,d.id),u()}function E(e){const t=document.createElement("div");t.classList.add("todo-card"),t.id=e.id;const n=document.createElement("h3");n.textContent=`${e.name}`,n.classList.add("note-title");const o=document.createElement("p");o.textContent=`${e.dueDate}`,o.classList.add("note-date");const d=document.createElement("p");d.textContent=`${e.priority}`,d.classList.add("note-priority");const c=document.createElement("button");c.textContent="+",c.addEventListener("click",y),c.classList.add("expand-note"),c.id=`${e.description}`;const i=document.createElement("button");i.textContent="edit",i.addEventListener("click",s),i.classList.add("edit-note");const r=document.createElement("button");return r.textContent="del",r.addEventListener("click",C),r.classList.add("remove-note"),t.append(n,o,d,c,i,r),t}function f(t){const n=document.createElement("div");n.id="notes";const o=document.createElement("div");o.id="notes-header";const d=document.createElement("h1");d.id="notes-title";const c=document.createElement("p");c.id="notes-sub";const i=document.createElement("button");i.id="notes-button";const r=document.createElement("section");return r.id="notes-container",i.addEventListener("click",l),i.textContent="Add",o.append(d,c,i),d.textContent=`${e.name} notes`,c.textContent=`${e.description}`,n.append(o,r),t.list.forEach((e=>{const t=E(e);r.appendChild(t)})),n}function C({target:t}){const{id:n}=t.parentNode,o=e.list.findIndex((e=>e.id===n));e.list.splice(o,1),t.parentNode.parentNode.removeChild(t.parentNode),populateStorage()}function y({target:e}){const{id:t}=e,n=document.createElement("p");n.textContent=`${t}`,n.classList.add("note-description"),e.parentNode.appendChild(n),e.textContent="-",e.removeEventListener("click",y),e.addEventListener("click",v)}function v({target:e}){e.parentNode.removeChild(e.parentNode.lastChild),e.textContent="+",e.removeEventListener("click",v),e.addEventListener("click",y)}function x(t){e=t}function g({target:e}){const n=t.find((t=>t.id===e.parentNode.id)),o=document.getElementById("notes-container");!function(e){e.innerHTML=""}(o),n.list.forEach((e=>{const t=E(e);o.appendChild(t)})),x(n);const d=document.getElementById("main");d.removeChild(d.lastChild);const c=f(n);d.appendChild(c)}function h(e){e.preventDefault();const{target:t}=e,n=t[0].value,o=t[1].value,d=$(c(n,o));d.addEventListener("click",g),document.getElementById("project-container").prepend(d),S(),populateStorage()}function L(){document.getElementById("project-form").style.display="flex"}function S(){const e=document.getElementById("project-form");e.style.display="none",e.reset()}function I({target:e}){const n=e.parentNode.id,o=t.findIndex((e=>e.id===n)),d=t[o].description;document.getElementById("main").appendChild(function(e){const t=document.createElement("form");t.classList.add("project-form-edit"),t.id=`${e}`;const n=document.createElement("ul"),o=document.createElement("li"),d=document.createElement("input");d.classList.add("project-form-edit-title"),d.required=!0,o.appendChild(d);const c=document.createElement("li"),i=document.createElement("input");i.classList.add("project-form-edit-description"),i.required=!0,c.appendChild(i);const r=document.createElement("li"),a=document.createElement("button"),l=document.createElement("button");return a.type="submit",a.textContent="Save",l.addEventListener("click",q),l.textContent="Cancel",r.append(a,l),t.addEventListener("submit",b),n.append(o,c,r),t.appendChild(n),t}(n));const c=e.parentNode.querySelector(".project-title"),i=document.querySelector(".project-form-edit-title"),r=document.querySelector(".project-form-edit-description");i.value=`${c.textContent}`,r.value=`${d}`}function q(){const e=document.querySelector(".project-form-edit");document.getElementById("main").removeChild(e)}function b(n){n.preventDefault();const{target:d}=n,c=d[0].value,i=d[1].value,r=document.getElementById(`${d.id}`).querySelector(".project-title"),a=document.getElementById("notes-title"),l=document.getElementById("notes-sub");e.id===d.id&&(a.textContent=`${c} notes`,l.textContent=`${i}`),r.textContent=`${c}`,function(n,d,c){const i=t.findIndex((e=>e.id===c));console.log(d),t[i].name=n.innerText,t[i].description=d,e=t[i],o()}(r,i,d.id),q()}function $(e){const t=document.createElement("div");t.classList.add("project-card"),t.id=`${e.id}`;const n=document.createElement("p");n.classList.add("project-title"),n.textContent=`${e.name}`,n.addEventListener("click",g);const o=document.createElement("p");o.textContent=`${e.description}`,o.classList.add("project-description");const d=document.createElement("button");d.textContent="edit",d.addEventListener("click",I),d.classList.add("edit-project");const c=document.createElement("button");return c.textContent="del",c.id=`${e.id}`,c.addEventListener("click",j),t.append(n,d,c),t}function j({target:n}){const{id:d}=n.parentNode,c=t.findIndex((e=>e.id===d));if(n.parentNode.parentNode.removeChild(n.parentNode),t[c]===e){t.splice(c,1);const n=document.getElementById("notes-container"),o=document.getElementById("notes-header");if(n.innerHTML="",o.innerHTML="",t.length>0){e=t[0];const o=e.list;console.log(t),o.length>0&&o.forEach((e=>{const t=E(e);n.appendChild(t)}))}else e=null,document.getElementById("notes-header").innerHTML=""}else t.splice(c,1);o()}x(t[0]),r(i("Test","Just a test",25,"low"),e),localStorage.getItem("projects")?(n(),e=JSON.parse(localStorage.getItem("currentProject"))):o(),document.getElementById("content").append(function(){const e=document.createElement("header"),t=document.createElement("h1");return t.textContent="Todo-List",e.appendChild(t),e}(),function(){const n=document.createElement("section");return n.id="main",n.append(function(){const e=document.createElement("div");e.id="projects";const n=document.createElement("div"),o=document.createElement("h2");o.textContent="Projects";const d=document.createElement("button");d.textContent="Add",d.addEventListener("click",L);const c=document.createElement("section");return c.id="project-container",n.append(o,d),e.append(n,c),t.forEach((e=>{const t=$(e);c.appendChild(t)})),e}(),f(e)),n}(),function(){const e=document.createElement("footer");return e.textContent="footer",e}(),function(){const e=document.createElement("form");e.id="note-form",e.style.display="none";const t=document.createElement("ul"),n=document.createElement("li"),o=document.createElement("input");o.id="note-form-title",o.required=!0,n.appendChild(o);const d=document.createElement("li"),c=document.createElement("input");c.id="note-form-description",c.required=!0,d.appendChild(c);const i=document.createElement("li"),r=document.createElement("input");r.id="note-form-date",r.required=!0,i.appendChild(r);const l=document.createElement("li"),s=document.createElement("input");s.id="note-form-priority",s.required=!0,l.appendChild(s);const u=document.createElement("li"),p=document.createElement("button"),E=document.createElement("button");return p.type="submit",p.textContent="Submit",E.addEventListener("click",m),E.textContent="Cancel",u.append(p,E),e.addEventListener("submit",a),t.append(n,d,i,l,u),e.appendChild(t),e}(),function(){const e=document.createElement("form");e.id="project-form",e.style.display="none";const t=document.createElement("ul"),n=document.createElement("li"),o=document.createElement("input");o.required=!0,n.appendChild(o);const d=document.createElement("li"),c=document.createElement("input");c.required=!0,d.appendChild(c);const i=document.createElement("li"),r=document.createElement("button"),a=document.createElement("button");return r.type="submit",r.textContent="Submit",a.addEventListener("click",S),a.textContent="Cancel",i.append(r,a),e.addEventListener("submit",h),t.append(n,d,i),e.appendChild(t),e}())})();