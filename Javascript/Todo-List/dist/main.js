(()=>{"use strict";let e,t=[];const n=function(e){return`${e}_`+Math.random().toString(36).substr(2,9)},o=(e,o)=>{const d=((e,t)=>({name:e,description:t,list:[],id:n("project")}))(e,o);return t.unshift(d),d};o("test","testing"),o("test2","testing");const d=(e,t,o,d)=>({name:e,description:t,dueDate:o,priority:d,id:n("note")});function c(e,t){t.list.unshift(e)}function i(t){t.preventDefault();const{target:n}=t,o=n[0].value,i=n[1].value,r=n[2].value,a=n[3].value,m=d(o,i,r,a);c(m,e);const u=s(m);document.getElementById("notes-container").prepend(u),l()}function r(){document.getElementById("note-form").style.display="flex"}function l(){const e=document.getElementById("note-form");e.style.display="none",function(e){e.reset()}(e)}function a({target:e}){const t=e.parentNode.id;document.getElementById("main").appendChild(function(e){const t=document.createElement("form");t.classList.add("note-form-edit"),t.id=`${e}`;const n=document.createElement("ul"),o=document.createElement("li"),d=document.createElement("input");d.classList.add("note-form-edit-title"),d.required=!0,o.appendChild(d);const c=document.createElement("li"),i=document.createElement("input");i.classList.add("note-form-edit-description"),i.required=!0,c.appendChild(i);const r=document.createElement("li"),l=document.createElement("input");l.classList.add("note-form-edit-date"),l.required=!0,r.appendChild(l);const a=document.createElement("li"),s=document.createElement("input");s.classList.add("note-form-edit-priority"),s.required=!0,a.appendChild(s);const p=document.createElement("li"),E=document.createElement("button"),f=document.createElement("button");return E.type="submit",E.textContent="Save",f.addEventListener("click",m),f.textContent="Cancel",p.append(E,f),t.addEventListener("submit",u),n.append(o,c,r,a,p),t.appendChild(n),t}(t));const n=e.parentNode.querySelector(".note-title"),o=e.parentNode.querySelector(".note-description"),d=e.parentNode.querySelector(".note-date"),c=e.parentNode.querySelector(".note-priority"),i=document.querySelector(".note-form-edit-title"),r=document.querySelector(".note-form-edit-description"),l=document.querySelector(".note-form-edit-date"),a=document.querySelector(".note-form-edit-priority");i.value=`${n.textContent}`,r.value=`${o.textContent}`,l.value=`${d.textContent}`,a.value=`${c.textContent}`}function m(){const e=document.querySelector(".note-form-edit");document.getElementById("main").removeChild(e)}function u(n){n.preventDefault();const{target:o}=n,d=o[0].value,c=o[1].value,i=o[2].value,r=o[3].value,l=document.getElementById(`${o.id}`),a=l.querySelector(".note-title"),u=l.querySelector(".note-description"),s=l.querySelector(".note-date"),p=l.querySelector(".note-priority");a.textContent=`${d}`,u.textContent=`${c}`,s.textContent=`${i}`,p.textContent=`${r}`,function(n,o,d,c,i){const r=t.findIndex((t=>t.name===e.name)),l=t[r].list.findIndex((e=>e.id===i));t[r].list[l].title=n.innerText,t[r].list[l].description=o.innerText,t[r].list[l].dueDate=d.innerText,t[r].list[l].priority=c.innerText,e=t[r]}(a,u,s,p,o.id),m()}function s(e){const t=document.createElement("div");t.classList.add("todo-card"),t.id=e.id;const n=document.createElement("h3");n.textContent=`${e.name}`,n.classList.add("note-title");const o=document.createElement("p");o.textContent=`${e.description}`,o.classList.add("note-description");const d=document.createElement("p");d.textContent=`${e.dueDate}`,d.classList.add("note-date");const c=document.createElement("p");c.textContent=`${e.priority}`,c.classList.add("note-priority");const i=document.createElement("button");i.textContent="edit",i.addEventListener("click",a),i.classList.add("edit-note");const r=document.createElement("button");return r.textContent="del",r.addEventListener("click",E),r.classList.add("remove-note"),t.append(n,o,d,c,i,r),t}function p(t){const n=document.createElement("div");n.id="notes";const o=document.createElement("div");o.id="notes-header";const d=document.createElement("h1");d.id="notes-title";const c=document.createElement("button");c.id="notes-button";const i=document.createElement("section");return i.id="notes-container",c.addEventListener("click",r),c.textContent="Add",o.append(d,c),d.textContent=`${e.name} notes`,n.append(o,i),t.list.forEach((e=>{const t=s(e);i.appendChild(t)})),n}function E({target:t}){const{id:n}=t.parentNode,o=e.list.findIndex((e=>e.id===n));e.list.splice(o,1),t.parentNode.parentNode.removeChild(t.parentNode)}function f(t){e=t}function C({target:e}){const n=t.find((t=>t.id===e.parentNode.id)),o=document.getElementById("notes-container");!function(e){e.innerHTML=""}(o),n.list.forEach((e=>{const t=s(e);o.appendChild(t)})),f(n);const d=document.getElementById("main");d.removeChild(d.lastChild);const c=p(n);d.appendChild(c)}function y(e){e.preventDefault();const{target:t}=e,n=t[0].value,d=t[1].value,c=q(o(n,d));c.addEventListener("click",C),document.getElementById("project-container").prepend(c),x()}function v(){document.getElementById("project-form").style.display="flex"}function x(){const e=document.getElementById("project-form");e.style.display="none",e.reset()}function h({target:t}){t.parentNode.id,document.getElementById("main").appendChild(function(){const t=document.createElement("form");t.classList.add("project-form-edit"),t.id=`${e.id}`;const n=document.createElement("ul"),o=document.createElement("li"),d=document.createElement("input");d.classList.add("project-form-edit-title"),d.required=!0,o.appendChild(d);const c=document.createElement("li"),i=document.createElement("input");i.classList.add("project-form-edit-description"),i.required=!0,c.appendChild(i);const r=document.createElement("li"),l=document.createElement("button"),a=document.createElement("button");return l.type="submit",l.textContent="Save",a.addEventListener("click",L),a.textContent="Cancel",r.append(l,a),t.addEventListener("submit",g),n.append(o,c,r),t.appendChild(n),t}());const n=t.parentNode.querySelector(".project-title"),o=t.parentNode.querySelector(".project-description"),d=document.querySelector(".project-form-edit-title"),c=document.querySelector(".project-form-edit-description");d.value=`${n.textContent}`,c.value=`${o.textContent}`}function L(){const e=document.querySelector(".project-form-edit");document.getElementById("main").removeChild(e)}function g(n){n.preventDefault();const{target:o}=n,d=o[0].value,c=o[1].value,i=document.getElementById(`${o.id}`),r=i.querySelector(".project-title"),l=i.querySelector(".project-description");r.textContent=`${d}`,l.textContent=`${c}`,function(n,o,d){const c=t.findIndex((t=>t.name===e.name));t[c].name=n.innerText,t[c].description=o.innerText,e=t[c]}(r,l,o.id),L()}function q(e){const t=document.createElement("div");t.classList.add("project-card"),t.id=`${e.id}`;const n=document.createElement("p");n.classList.add("project-title"),n.textContent=`${e.name}`,n.addEventListener("click",C);const o=document.createElement("p");o.textContent=`${e.description}`,o.classList.add("project-description");const d=document.createElement("button");d.textContent="edit",d.addEventListener("click",h),d.classList.add("edit-project");const c=document.createElement("button");return c.textContent="del",c.id=`${e.id}`,c.addEventListener("click",b),t.append(n,d,c),t}function b({target:n}){const{id:o}=n.parentNode,d=t.findIndex((e=>e.id===o));if(n.parentNode.parentNode.removeChild(n.parentNode),t[d]===e){t.splice(d,1);const n=document.getElementById("notes-container"),o=document.getElementById("notes-header");if(n.innerHTML="",o.innerHTML="",t.length>0){e=t[0];const o=e.list;console.log(t),o.length>0&&o.forEach((e=>{const t=s(e);n.appendChild(t)}))}else e=null,document.getElementById("notes-header").innerHTML=""}else t.splice(d,1)}f(t[0]),c(d("Test","Just a test",25,"low"),e),document.getElementById("content").append(function(){const e=document.createElement("header"),t=document.createElement("h1");return t.textContent="Todo-List",e.appendChild(t),e}(),function(){const n=document.createElement("section");return n.id="main",n.append(function(){const e=document.createElement("div");e.id="projects";const n=document.createElement("div"),o=document.createElement("h2");o.textContent="Projects";const d=document.createElement("button");d.textContent="Add",d.addEventListener("click",v);const c=document.createElement("section");return c.id="project-container",n.append(o,d),e.append(n,c),t.forEach((e=>{const t=q(e);c.appendChild(t)})),e}(),p(e)),n}(),function(){const e=document.createElement("footer");return e.textContent="footer",e}(),function(){const e=document.createElement("form");e.id="note-form",e.style.display="none";const t=document.createElement("ul"),n=document.createElement("li"),o=document.createElement("input");o.id="note-form-title",o.required=!0,n.appendChild(o);const d=document.createElement("li"),c=document.createElement("input");c.id="note-form-description",c.required=!0,d.appendChild(c);const r=document.createElement("li"),a=document.createElement("input");a.id="note-form-date",a.required=!0,r.appendChild(a);const m=document.createElement("li"),u=document.createElement("input");u.id="note-form-priority",u.required=!0,m.appendChild(u);const s=document.createElement("li"),p=document.createElement("button"),E=document.createElement("button");return p.type="submit",p.textContent="Submit",E.addEventListener("click",l),E.textContent="Cancel",s.append(p,E),e.addEventListener("submit",i),t.append(n,d,r,m,s),e.appendChild(t),e}(),function(){const e=document.createElement("form");e.id="project-form",e.style.display="none";const t=document.createElement("ul"),n=document.createElement("li"),o=document.createElement("input");o.required=!0,n.appendChild(o);const d=document.createElement("li"),c=document.createElement("input");c.required=!0,d.appendChild(c);const i=document.createElement("li"),r=document.createElement("button"),l=document.createElement("button");return r.type="submit",r.textContent="Submit",l.addEventListener("click",x),l.textContent="Cancel",i.append(r,l),e.addEventListener("submit",y),t.append(n,d,i),e.appendChild(t),e}())})();